{"version":3,"sources":["exclusivecollections_load_more.js"],"names":["$","document","ready","load_more_click","load_more","on","dataId","data","change_more","window","scroll","scrollTop","windowHeight","height","offsetTop","offset","top","setTimeout","removeClass","load_more_lg","length","j","i","addClass","load_more_show","load_more_ok","remaing_cunt","html","hide","show","q"],"mappings":";;AACAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;;AAG1B;AACA,QAAIC,kBAAkB,CAAtB;AACA;;AAEAC,cAAUD,eAAV;;AAEA;AACAH,MAAE,eAAF,EAAmBK,EAAnB,CAAsB,OAAtB,EAA+B,YAAY;;AAEvC,YAAIC,SAASN,EAAE,IAAF,EAAQO,IAAR,CAAa,OAAb,CAAb;AACA,YAAID,UAAU,CAAd,EAAiB;AACbH,8BAAkB,CAAlB;AACA;AACAK,wBAAYL,eAAZ,EAA6BG,MAA7B;AACAH;AACH,SALD,MAKO;AACHC,sBAAUD,eAAV;AACH;AAEJ,KAZD;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEAH,MAAES,MAAF,EAAUC,MAAV,CAAiB,YAAY;;AAEzB,YAAIC,YAAYX,EAAES,MAAF,EAAUE,SAAV,EAAhB,CAFyB,CAEe;AACxC,YAAIC,eAAeZ,EAAES,MAAF,EAAUI,MAAV,EAAnB,CAHyB,CAGc;AACvC;AACA,YAAIC,YAAYd,EAAE,oBAAF,EAAwBe,MAAxB,GAAiCC,GAAjD;;AAEA,YAAIF,YAAaH,YAAYC,YAAzB,IAA0CE,YAAYH,SAA1D,EAAqE;AACjE,gBAAIR,mBAAmB,CAAvB,EAA0B;AACtBA,kCAAkB,CAAlB;AACH;AACDc,uBAAW,YAAW;AAClBb,0BAAUD,eAAV;AACAA;AACH,aAHD,EAGE,GAHF;AAIH;AACJ,KAhBD;AAiBA;;;;;;;;AAUA;;;;;;;;;AASA,aAASC,SAAT,CAAmBD,eAAnB,EAAoC;AAChCH,UAAE,uBAAF,EAA2BkB,WAA3B,CAAuC,IAAvC;AACA,YAAIC,eAAenB,EAAE,uBAAF,EAA2BoB,MAA9C;AACA,YAAIC,IAAI,IAAIlB,eAAZ;AACA,aAAK,IAAImB,IAAI,CAAb,EAAgBA,KAAKH,YAArB,EAAmCG,GAAnC,EAAwC;AACpC,gBAAIA,IAAID,CAAR,EAAW;AACPrB,kBAAE,8BAA8BsB,CAA9B,GAAkC,GAApC,EAAyCC,QAAzC,CAAkD,IAAlD;AACH;AACJ;;AAED;;AAEA,YAAIC,iBAAiBxB,EAAE,uBAAF,EAA2BoB,MAAhD;AACA,YAAIK,eAAezB,EAAE,0BAAF,EAA8BoB,MAAjD;AACA,YAAIM,eAAeF,iBAAiBC,YAApC;;AAEAzB,UAAE,yBAAF,EAA6B2B,IAA7B,CAAkCD,YAAlC;;AAGA,YAAIA,gBAAgB,CAApB,EAAuB;AACnB1B,cAAE,oBAAF,EAAwB4B,IAAxB;AACH,SAFD,MAGK;AACD5B,cAAE,oBAAF,EAAwB6B,IAAxB;AACH;AACJ;;AAED,aAASrB,WAAT,CAAqBL,eAArB,EAAsCG,MAAtC,EAA8C;AAC1CN,UAAE,uBAAF,EAA2BkB,WAA3B,CAAuC,IAAvC;AACA,YAAIC,eAAenB,EAAE,uBAAF,EAA2BoB,MAA9C;AACA,YAAIC,IAAIf,SAASH,eAAjB;AACA,aAAK,IAAImB,IAAI,CAAb,EAAgBA,KAAKH,YAArB,EAAmCG,GAAnC,EAAwC;AACpC,gBAAIA,IAAID,CAAR,EAAW;AACP,oBAAIS,IAAIR,IAAIhB,MAAZ;AACAN,kBAAE,8BAA8B8B,CAA9B,GAAkC,GAApC,EAAyCP,QAAzC,CAAkD,IAAlD;AACH;AACJ;;AAEDvB,UAAE,oBAAF,EAAwB4B,IAAxB;AAEH;AAOJ,CA/HD","file":"../exclusivecollections/exclusivecollections_load_more.js","sourcesContent":["\n$(document).ready(function () {\n\n\n    //PC版 hover\n    var load_more_click = 1;\n    // var winHeight = 0;\n\n    load_more(load_more_click);\n\n    //假切换\n    $('.tab_common a').on('click', function () {\n\n        var dataId = $(this).data('title');\n        if (dataId != 1) {\n            load_more_click = 1 ;\n            // alert(load_more_click);\n            change_more(load_more_click, dataId)\n            load_more_click++;\n        } else {\n            load_more(load_more_click);\n        }\n\n    })\n\n    // $(\".exc_load_more_btn\").mouseover(function () {\n    //     // load_more_click++;\n    //     if (load_more_click == 1) {\n    //         load_more_click = 2\n    //     }\n    //     load_more(load_more_click);\n    //     console.log(load_more_click)\n    // });\n    // $(\".exc_load_more_btn\").mouseout(function () {\n    //     load_more_click++;\n    //     // console.log(load_more_click)\n    // });\n\n    // var clear = $(\".exc_load_more .ok\").length;\n    // for (var i = 0; i <= clear; i++) {\n    //     if (i%4 == 0) {\n    //         $(\".exc_load_more .ok\").eq(i).css(\"clear\",\"both\");\n    //     }\n    // }\n\n    $(window).scroll(function () {\n\n        var scrollTop = $(window).scrollTop();  //页面向上滚动的距离\n        var windowHeight = $(window).height(); // 浏览器自身的高度\n        // var offsetTop = $(\".exc_load_more_btn\").offset().top;  //目标相对于document顶部的位置\n        var offsetTop = $('#gm_footer_section').offset().top;\n\n        if (offsetTop < (scrollTop + windowHeight) && offsetTop > scrollTop) { \n            if (load_more_click == 1) {\n                load_more_click = 2\n            }\n            setTimeout(function() {\n                load_more(load_more_click);\n                load_more_click++;\n            },350)\n        }\n    })\n    /**\n     * M版 思路： \n     * 获取加载更多offset \n     * 判断距离\n     * 判断是否改变 \n     * 调用load_more\n     */\n\n\n\n    /**\n     * 思路： \n     * all none\n     * 存储所有的个数 选择需要一次显示的数量\n     * 循环给需要显示的添加block\n     * 将none的个数计算出来 添加到加载更多后\n     * 如果没有none的 隐藏加载更多\n     * xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n     */\n    function load_more(load_more_click) {\n        $(\".exc_load_more .items\").removeClass(\"ok\");\n        var load_more_lg = $(\".exc_load_more .items\").length;\n        var j = 8 * load_more_click;\n        for (var i = 0; i <= load_more_lg; i++) {\n            if (i < j) {\n                $(\".exc_load_more .items:eq(\" + i + \")\").addClass(\"ok\");\n            }\n        }\n\n        // load_more_click++;\n\n        var load_more_show = $(\".exc_load_more .items\").length;\n        var load_more_ok = $(\".exc_load_more .items.ok\").length;\n        var remaing_cunt = load_more_show - load_more_ok;\n\n        $(\".exc_load_more_btn span\").html(remaing_cunt);\n\n\n        if (remaing_cunt == 0) {\n            $(\".exc_load_more_btn\").hide();\n        }\n        else {\n            $(\".exc_load_more_btn\").show();\n        }\n    }\n\n    function change_more(load_more_click, dataId) {\n        $(\".exc_load_more .items\").removeClass(\"ok\");\n        var load_more_lg = $(\".exc_load_more .items\").length;\n        var j = dataId * load_more_click;\n        for (var i = 0; i <= load_more_lg; i++) {\n            if (i < j) {\n                var q = i + dataId;\n                $(\".exc_load_more .items:eq(\" + q + \")\").addClass(\"ok\");\n            }\n        }\n\n        $(\".exc_load_more_btn\").hide();\n\n    }\n\n\n\n\n\n\n});\n"]}