{"version":3,"sources":["cinema_flim_list.js"],"names":["$","document","ready","load_more_click","load_more","window","scroll","scrollTop","windowHeight","height","offsetTop","offset","top","removeClass","load_more_lg","length","j","i","addClass","load_more_show","load_more_ok","remaing_cunt","html","hide","show"],"mappings":";;AACAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;;AAG1B;AACA,QAAIC,kBAAkB,CAAtB;AACA;;AAEAC,cAAUD,eAAV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAH,MAAEK,MAAF,EAAUC,MAAV,CAAiB,YAAY;;AAEzB,YAAIC,YAAYP,EAAEK,MAAF,EAAUE,SAAV,EAAhB,CAFyB,CAEe;AACxC,YAAIC,eAAeR,EAAEK,MAAF,EAAUI,MAAV,EAAnB,CAHyB,CAGc;AACvC;AACA,YAAIC,YAAYV,EAAE,qBAAF,EAAyBW,MAAzB,GAAkCC,GAAlD;;AAEA,YAAIF,YAAaH,YAAYC,YAAzB,IAA0CE,YAAYH,SAA1D,EAAqE;AACjE,gBAAIJ,mBAAmB,CAAvB,EAA0B;AACtBA,kCAAkB,CAAlB;AACH;AACDC,sBAAUD,eAAV;AACAA;AACH;AACJ,KAdD;;AAgBA;;;;;;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;;AAGA;;;;;;;;;AASA,aAASC,SAAT,CAAmBD,eAAnB,EAAoC;AAChCH,UAAE,uBAAF,EAA2Ba,WAA3B,CAAuC,IAAvC;AACA,YAAIC,eAAed,EAAE,uBAAF,EAA2Be,MAA9C;AACA,YAAIC,IAAI,IAAIb,eAAZ;AACA,aAAK,IAAIc,IAAI,CAAb,EAAgBA,KAAKH,YAArB,EAAmCG,GAAnC,EAAwC;AACpC,gBAAIA,IAAID,CAAR,EAAW;AACPhB,kBAAE,8BAA8BiB,CAA9B,GAAkC,GAApC,EAAyCC,QAAzC,CAAkD,IAAlD;AACH;AACJ;;AAED;;AAEA,YAAIC,iBAAiBnB,EAAE,uBAAF,EAA2Be,MAAhD;AACA,YAAIK,eAAepB,EAAE,0BAAF,EAA8Be,MAAjD;AACA,YAAIM,eAAeF,iBAAiBC,YAApC;;AAEApB,UAAE,yBAAF,EAA6BsB,IAA7B,CAAkCD,YAAlC;;AAGA,YAAIA,gBAAgB,CAApB,EAAuB;AACnBrB,cAAE,oBAAF,EAAwBuB,IAAxB;AACH,SAFD,MAGK;AACDvB,cAAE,oBAAF,EAAwBwB,IAAxB;AACH;AACJ;AAOJ,CArGD","file":"../cinema/cinema_flim_list.js","sourcesContent":["\n$(document).ready(function () {\n\n\n    //PC版 hover\n    var load_more_click = 1;\n    // var winHeight = 0;\n    \n    load_more(load_more_click);\n\n    // $(\".exc_load_more_btn\").mouseover(function () {\n    //     // load_more_click++;\n    //     if (load_more_click == 1) {\n    //         load_more_click = 2\n    //     }\n    //     load_more(load_more_click);\n    //     console.log(load_more_click)\n    // });\n    // $(\".exc_load_more_btn\").mouseout(function () {\n    //     load_more_click++;\n    //     // console.log(load_more_click)\n    // });\n    $(window).scroll(function () {\n\n        var scrollTop = $(window).scrollTop();  //页面向上滚动的距离\n        var windowHeight = $(window).height(); // 浏览器自身的高度\n        // var offsetTop = $(\".exc_load_more_btn\").offset().top;  //目标相对于document顶部的位置\n        var offsetTop = $('#cinema_seating_img').offset().top;\n\n        if (offsetTop < (scrollTop + windowHeight) && offsetTop > scrollTop) { \n            if (load_more_click == 1) {\n                load_more_click = 2\n            }\n            load_more(load_more_click);\n            load_more_click++;\n        }\n    })\n\n    /**\n     * M版 思路： \n     * 获取加载更多offset \n     * 判断距离\n     * 判断是否改变 \n     * 调用load_more\n     */\n\n    // if (navigator.userAgent.match(/(iPhone|iPod|Android|ios|iPad)/i)) {\n    //     $(window).scroll(function () {\n    //         var btnTop = $(\".exc_load_more_btn\").offset().top;\n    //         var par = parseInt(btnTop) - 200;\n    //          var winHeight = $(window).scrollTop();\n    //         if (par <= winHeight) {\n    //             load_more_click++\n    //             load_more(load_more_click);\n    //         }\n    //     })\n\n\n    // }\n\n\n    /**\n     * 思路： \n     * all none\n     * 存储所有的个数 选择需要一次显示的数量\n     * 循环给需要显示的添加block\n     * 将none的个数计算出来 添加到加载更多后\n     * 如果没有none的 隐藏加载更多\n     * xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n     */\n    function load_more(load_more_click) {\n        $(\".exc_load_more .items\").removeClass(\"ok\");\n        var load_more_lg = $(\".exc_load_more .items\").length;\n        var j = 6 * load_more_click;\n        for (var i = 0; i <= load_more_lg; i++) {\n            if (i < j) {\n                $(\".exc_load_more .items:eq(\" + i + \")\").addClass(\"ok\");\n            }\n        }\n\n        // load_more_click++;\n\n        var load_more_show = $(\".exc_load_more .items\").length;\n        var load_more_ok = $(\".exc_load_more .items.ok\").length;\n        var remaing_cunt = load_more_show - load_more_ok;\n\n        $(\".exc_load_more_btn span\").html(remaing_cunt);\n\n\n        if (remaing_cunt == 0) {\n            $(\".exc_load_more_btn\").hide();\n        }\n        else {\n            $(\".exc_load_more_btn\").show();\n        }\n    }\n\n\n\n\n\n\n});\n"]}