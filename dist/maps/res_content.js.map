{"version":3,"sources":["res_content.js"],"names":["$","document","ready","load_more_click","indexNum","load_more","on","index","eq","removeClass","addClass","siblings","window","scroll","scrollTop","windowHeight","height","offsetTop","offset","top","load_more_lg","length","j","i","load_more_show","load_more_ok","remaing_cunt","html","hide","show"],"mappings":";;AACAA,EAAEC,QAAF,EAAYC,KAAZ,CAAkB,YAAY;;AAG1B;AACA,QAAIC,kBAAkB,CAAtB;AACA;AACA,QAAIC,QAAJ;AACAC,cAAUF,eAAV;;AAEAH,MAAE,sBAAF,EAA0BM,EAA1B,CAA6B,OAA7B,EAAqC,YAAU;;AAE5CF,mBAAYJ,EAAE,IAAF,EAAQO,KAAR,EAAZ;;AAEAP,UAAE,iBAAF,EAAqBQ,EAArB,CAAwBJ,QAAxB,EAAkCK,WAAlC,CAA8C,gBAA9C,EAAgEC,QAAhE,CAAyE,eAAzE,EAA0FC,QAA1F,GAAqGF,WAArG,CAAiH,eAAjH,EAAkIC,QAAlI,CAA2I,gBAA3I;AACAP,0BAAkB,CAAlB;AACCE,kBAAUF,eAAV;AACH,KAPD;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAIAH,MAAEY,MAAF,EAAUC,MAAV,CAAiB,YAAY;;AAEzB,YAAIC,YAAYd,EAAEY,MAAF,EAAUE,SAAV,EAAhB,CAFyB,CAEe;AACxC,YAAIC,eAAef,EAAEY,MAAF,EAAUI,MAAV,EAAnB,CAHyB,CAGc;AACvC;AACA,YAAIC,YAAYjB,EAAE,gCAAF,EAAoCkB,MAApC,GAA6CC,GAA7D;;AAEA,YAAIF,YAAaH,YAAYC,YAAzB,IAA0CE,YAAYH,SAA1D,EAAqE;AACjE,gBAAIX,mBAAmB,CAAvB,EAA0B;AACtBA,kCAAkB,CAAlB;AACH;AACDE,sBAAUF,eAAV;AACAA;AACH;AACJ,KAdD;;AAiBA;;;;;;;;;AASA,aAASE,SAAT,CAAmBF,eAAnB,EAAoC;AAChCH,UAAE,uBAAF,EAA2BS,WAA3B,CAAuC,IAAvC;AACA,YAAIW,eAAepB,EAAE,uBAAF,EAA2BqB,MAA9C;AACA,YAAIC,IAAI,IAAInB,eAAZ;AACA,aAAK,IAAIoB,IAAI,CAAb,EAAgBA,KAAKH,YAArB,EAAmCG,GAAnC,EAAwC;AACpC,gBAAIA,IAAID,CAAR,EAAW;AACPtB,kBAAE,8BAA8BuB,CAA9B,GAAkC,GAApC,EAAyCb,QAAzC,CAAkD,IAAlD;AACH;AACJ;;AAED;;AAEA,YAAIc,iBAAiBxB,EAAE,uBAAF,EAA2BqB,MAAhD;AACA,YAAII,eAAezB,EAAE,0BAAF,EAA8BqB,MAAjD;AACA,YAAIK,eAAeF,iBAAiBC,YAApC;;AAEAzB,UAAE,yBAAF,EAA6B2B,IAA7B,CAAkCD,YAAlC;;AAGA,YAAIA,gBAAgB,CAApB,EAAuB;AACnB1B,cAAE,oBAAF,EAAwB4B,IAAxB;AACH,SAFD,MAGK;AACD5B,cAAE,oBAAF,EAAwB6B,IAAxB;AACH;AACJ;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAOH,CAzGD","file":"../restaurantscatalog/res_content.js","sourcesContent":["\r\n$(document).ready(function () {\r\n\r\n\r\n    //PC版 hover\r\n    var load_more_click = 1;\r\n    // var winHeight = 0;\r\n    var indexNum ;\r\n    load_more(load_more_click);\r\n\r\n    $('.tab_bar .tab_common').on('click',function(){\r\n      \r\n       indexNum  = $(this).index()\r\n        \r\n       $('.exc_load_index').eq(indexNum).removeClass('load_more_none').addClass('exc_load_more').siblings().removeClass('exc_load_more').addClass('load_more_none')\r\n       load_more_click = 1;\r\n        load_more(load_more_click);\r\n    })\r\n    //假切换\r\n    // $('.tab_common a').on('click', function () {\r\n    //     if (dataId != 1) {\r\n    //         load_more_click = 1 ;\r\n    //         // alert(load_more_click);\r\n    //         // change_more(load_more_click, dataId)\r\n    //         load_more_click++;\r\n    //     } else {\r\n    //         load_more(load_more_click);\r\n    //     }\r\n\r\n    // })\r\n\r\n\r\n\r\n    $(window).scroll(function () {\r\n\r\n        var scrollTop = $(window).scrollTop();  //页面向上滚动的距离\r\n        var windowHeight = $(window).height(); // 浏览器自身的高度\r\n        // var offsetTop = $(\".exc_load_more_btn\").offset().top;  //目标相对于document顶部的位置\r\n        var offsetTop = $('#restaurantscatalog_advantages').offset().top;\r\n\r\n        if (offsetTop < (scrollTop + windowHeight) && offsetTop > scrollTop) { \r\n            if (load_more_click == 1) {\r\n                load_more_click = 2\r\n            }\r\n            load_more(load_more_click);\r\n            load_more_click++;\r\n        }\r\n    })\r\n\r\n\r\n    /**\r\n     * 思路： \r\n     * all none\r\n     * 存储所有的个数 选择需要一次显示的数量\r\n     * 循环给需要显示的添加block\r\n     * 将none的个数计算出来 添加到加载更多后\r\n     * 如果没有none的 隐藏加载更多\r\n     * xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n     */\r\n    function load_more(load_more_click) {\r\n        $(\".exc_load_more .items\").removeClass(\"ok\");\r\n        var load_more_lg = $(\".exc_load_more .items\").length;\r\n        var j = 6 * load_more_click;\r\n        for (var i = 0; i <= load_more_lg; i++) {\r\n            if (i < j) {\r\n                $(\".exc_load_more .items:eq(\" + i + \")\").addClass(\"ok\");\r\n            }\r\n        }\r\n\r\n        // load_more_click++;\r\n\r\n        var load_more_show = $(\".exc_load_more .items\").length;\r\n        var load_more_ok = $(\".exc_load_more .items.ok\").length;\r\n        var remaing_cunt = load_more_show - load_more_ok;\r\n\r\n        $(\".exc_load_more_btn span\").html(remaing_cunt);\r\n\r\n\r\n        if (remaing_cunt == 0) {\r\n            $(\".exc_load_more_btn\").hide();\r\n        }\r\n        else {\r\n            $(\".exc_load_more_btn\").show();\r\n        }\r\n    }\r\n\r\n    // function change_more(load_more_click, dataId) {\r\n    //     $(\".exc_load_more .items\").removeClass(\"ok\");\r\n    //     var load_more_lg = $(\".exc_load_more .items\").length;\r\n    //     var j = dataId * load_more_click;\r\n    //     for (var i = 0; i <= load_more_lg; i++) {\r\n    //         if (i < j) {\r\n    //             var q = i + dataId;\r\n    //             $(\".exc_load_more .items:eq(\" + q + \")\").addClass(\"ok\");\r\n    //         }\r\n    //     }\r\n\r\n    //     $(\".exc_load_more_btn\").hide();\r\n\r\n    // }\r\n\r\n\r\n\r\n\r\n\r\n\r\n});\r\n"]}