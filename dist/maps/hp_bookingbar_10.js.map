{"version":3,"sources":["hp_bookingbar_10.js"],"names":["$booking_tab1","$","menu","re","beforeScrollTop","booking_height","$btn_toggle","_container","window","on","find","offset","top","height","test","location","pathname","text","dateRangePicker","language","separator","autoClose","customTopBar","format","startDate","formatDate","Date","showShortcuts","getValue","innerHTML","setValue","s","bind","removeClass","click","event","hasClass","data","close","addClass","_left","left","$dpw","css","width","_width","innerWidth","length","e","preventDefault","stopPropagation","closest","trigger","booking_fixed_show","current_height","scrollTop","is","hide","next","show","prev","document","body","setTimeout","afterScrollTop","delta","slideUp","fadeIn","toggleClass","slideToggle","fadeOut"],"mappings":"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","file":"../common/hp_bookingbar_10.js","sourcesContent":["// $( \"#selectable\" ).selectable({\n//  stop: function() {\n//    var result = $( \"#select-result\" ).empty();\n//    $( \".ui-selected\", this ).each(function() {\n//      var index = $( \"#selectable li\" ).index( this );\n//      result.append( $(this).text() );\n//    });\n//  }\n// });\nvar $booking_tab1 = $(\"#bookingbar-tab1\"),\n    menu = $('.gm_top_menu_03'),\n    re = /galaxyhotel.html/gi,\n    beforeScrollTop = 0,\n    booking_height,\n    $btn_toggle = $('#booking-fixed .navbar-toggle'),\n    _container = $('#booking-fixed');\n$(window).on('load', function() {\n    booking_height = $booking_tab1.find('.inner').offset().top + $booking_tab1.find('.inner').height();\n    if (re.test(location.pathname)) {\n        $('.hotel-select .result').text('银河酒店');\n    }\n});\n\n// $(\"#selectable2\").selectable({\n//     stop: function() {\n//         var result = $(\"#select-result2\").empty();\n//         $(\".ui-selected\", this).each(function() {\n//             var index = $(\"#selectable2 li\").index(this);\n//             result.append($(this).text());\n//         });\n//     }\n// });\n\n$(function() {\n    $(\"#date1\").dateRangePicker({\n        language: 'cn',\n        separator: ' - ',\n        autoClose: true,\n        customTopBar: ' ',\n        format: 'YYYY年MM月DD日',\n        startDate: formatDate(new Date()),\n        showShortcuts: true,\n        getValue: function() {\n            return this.innerHTML;\n        },\n        setValue: function(s) {\n            this.innerHTML = s;\n        }\n    }).bind('datepicker-closed', function() {\n        $(this).removeClass('open');\n    }).bind('datepicker-open', function() {\n        $(this).removeClass('open');\n    });\n    $(\"#date1\").click(function(event) {\n        if ($(this).hasClass('open')) {\n            $(\"#date1\").data('dateRangePicker').close();\n            $(this).removeClass('open');\n            return;\n        }\n        $(this).addClass('open');\n        var _left = $(this).offset().left;\n        var $dpw = $(\".date-picker-wrapper\");\n        $dpw.css('left', _left);\n        if ($(window).width() < 560) {\n            var _width = $(this).innerWidth();\n            $dpw.find('.month-wrapper').innerWidth(_width);\n        }\n    });\n    if ($('#date2').length > 0) {\n        $(\"#date2\").dateRangePicker({\n            language: 'cn',\n            separator: ' - ',\n            autoClose: true,\n            customTopBar: ' ',\n            format: 'YYYY年MM月DD日',\n            startDate: formatDate(new Date()),\n            showShortcuts: true,\n            getValue: function() {\n                return this.innerHTML;\n            },\n            setValue: function(s) {\n                this.innerHTML = s;\n            }\n        }).bind('datepicker-closed', function() {\n            $(\"#date2\").removeClass('open');\n        }).bind('datepicker-open', function() {\n            $(this).addClass('.date2-datepicker');\n        });\n        $(\"#date2\").click(function(event) {\n            if ($(this).hasClass('open')) {\n                $(\"#date2\").data('dateRangePicker').close();\n                $(this).removeClass('open');\n                return;\n            }\n            $(this).addClass('open');\n            var _left = $(this).offset().left;\n            var $dpw = $(\".date-picker-wrapper\");\n            $dpw.css('left', _left);\n            if ($(window).width() < 560) {\n                var _width = $(this).innerWidth();\n                $dpw.find('.month-wrapper').width(_width);\n            }\n        });\n    }\n    $('.hotel-select,.number-people-select').on('click', function() {\n        if ($(\"#date1\").length > 0) {\n            $(\"#date1\").data('dateRangePicker').close();\n        }\n        if ($(\"#date2\").length > 0) {\n            $(\"#date2\").data('dateRangePicker').close();\n        }\n    });\n    $(window).on(\"resize\", function() {\n        if(booking_height != null){\n            booking_height = $booking_tab1.find('.inner').offset().top + $booking_tab1.find('.inner').height();\n        }\n    });\n    $('.hp-select li a').click(function(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        $(this).closest('.dropdown').find('.result:visible').text($(this).text());\n        $(this).closest('.dropdown-menu').trigger('click');\n    });\n    $('.dropdown-menu1 .title').on('click', function(e) {\n        e.stopPropagation();\n    })\n    $('.nps-cancel').click(function() {\n        $('#select-result3').text(2);\n        $('#adult-num').text(1);\n        $('#children-num').text(1);\n    });\n\n    function booking_fixed_show() {\n        var current_height = $(window).scrollTop(),\n            _width = $(window).width();\n        if (_width > 991) {\n            if (current_height > booking_height) {\n                if (_container.is(\":hidden\")) {\n                    menu.hide().next('#booking-fixed').show();\n                }\n            } else {\n                if (_container.is(\":visible\")) {\n                    _container.hide().prev().show();\n                }\n                if ($btn_toggle.is(\":hidden\")) {\n                    $btn_toggle.show();\n                }\n                menu.removeClass('rel');\n            }\n        }\n    }\n    if ($(window).width() > 991) {\n        beforeScrollTop = document.body.scrollTop;\n        $(window).on(\"load\", function() {\n            booking_fixed_show();\n            setTimeout(function() {$(window).trigger('resize')},1000)\n        });\n        $(window).on(\"resize\", function() {\n            booking_fixed_show();\n        });\n        $(window).on(\"scroll\", function() {\n            booking_fixed_show();\n            var afterScrollTop = $(window).scrollTop(),\n                delta = afterScrollTop - beforeScrollTop;\n            if (delta === 0) return false;\n            if (delta > 0) {\n                if ($('.gm_top_menu_03').hasClass('rel')) {\n                    $('.gm_top_menu_03').removeClass('rel').slideUp(350);\n                    $btn_toggle.fadeIn();\n                }\n            }\n            beforeScrollTop = afterScrollTop;\n        });\n        $btn_toggle.click(function() {\n            $('.gm_top_menu_03').toggleClass('rel').slideToggle(350);\n            $(this).fadeOut();\n        });\n\n\n    }\n});\n"]}